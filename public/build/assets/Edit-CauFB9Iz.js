import{d as h,C as w,c as z,s as C,x as T,a as l,o as a,b as x,e as o,m as N,w as y,f as t,p as U,i as n,k as m,v as g,t as u,q as W,P as V,g as j,j as B,F as P}from"./app-CBcdSYGl.js";import{_ as R}from"./AppLayout.vue_vue_type_script_setup_true_lang-Cykr0hji.js";import"./index-BH95GTik.js";import"./index-B_RuNNQq.js";import"./useForwardPropsEmits-BUmNaTt4.js";import"./useForwardExpose-2b0zYAwj.js";import"./useFocusGuards-BRQO_hst.js";import"./Teleport-BsQYp6hP.js";import"./VisuallyHidden-dajNmunB.js";import"./UserMenuContent.vue_vue_type_script_setup_true_lang-CPh5rXLj.js";import"./RovingFocusGroup-3mJjWm0y.js";import"./createLucideIcon-dtD6wVEP.js";import"./x-Br0THnaC.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C3rar4t_.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useToast-C_yoBaOs.js";const E={class:"py-12"},S={class:"max-w-3xl mx-auto sm:px-6 lg:px-8"},L={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},M={class:"p-6 text-gray-900 dark:text-gray-100"},D={class:"space-y-6"},O={class:"border dark:border-gray-700 p-4 rounded-md"},q={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-2"},F={key:0,class:"text-sm text-red-600 dark:text-red-400 mt-1"},G={key:1,class:"text-sm text-red-600 dark:text-red-400 mt-1"},$={key:2,class:"text-sm text-red-600 dark:text-red-400 mt-1"},A={key:3,class:"text-sm text-red-600 dark:text-red-400 mt-1"},H={class:"border dark:border-gray-700 p-4 rounded-md"},I={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-2"},J={key:0,class:"text-sm text-red-600 dark:text-red-400 mt-1"},K={key:1,class:"text-sm text-red-600 dark:text-red-400 mt-1"},Q={key:2,class:"text-sm text-red-600 dark:text-red-400 mt-1"},X={key:3,class:"text-sm text-red-600 dark:text-red-400 mt-1"},Y={key:0,class:"text-sm text-red-600 dark:text-red-400"},Z={key:0,class:"mt-2 mb-4"},ee={class:"flex items-center space-x-4"},te={class:"relative group"},re=["src"],oe={key:1,class:"mt-2 mb-4"},ie={key:2,class:"mt-2 mb-4"},de=["src"],se={key:3,class:"text-sm text-red-600 dark:text-red-400"},le={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},ae={key:0},ne={key:1},ue={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},me={key:0,class:"text-sm text-red-600 dark:text-red-400"},ge={key:0,class:"text-sm text-red-600 dark:text-red-400"},be={key:0,class:"text-sm text-red-600 dark:text-red-400"},pe={class:"flex items-center"},xe={key:0,class:"text-sm text-red-600 dark:text-red-400"},fe={class:"mt-8 flex justify-end"},ye=["disabled"],Re=h({__name:"Edit",props:{promotion:{}},setup(c){const i=c;console.log(i.promotion);const r=w({id:i.promotion.id,title:{en:i.promotion.title&&typeof i.promotion.title=="object"&&i.promotion.title.en||"","zh-TW":i.promotion.title&&typeof i.promotion.title=="object"&&i.promotion.title["zh-TW"]||"","zh-CN":i.promotion.title&&typeof i.promotion.title=="object"&&i.promotion.title["zh-CN"]||""},subtitle:{en:i.promotion.subtitle&&typeof i.promotion.subtitle=="object"&&i.promotion.subtitle.en||"","zh-TW":i.promotion.subtitle&&typeof i.promotion.subtitle=="object"&&i.promotion.subtitle["zh-TW"]||"","zh-CN":i.promotion.subtitle&&typeof i.promotion.subtitle=="object"&&i.promotion.subtitle["zh-CN"]||""},url:i.promotion.url,is_active:i.promotion.is_active,starts_at:i.promotion.starts_at||"",ends_at:i.promotion.ends_at||"",sort_order:i.promotion.sort_order,uploaded_banner_image:null,remove_banner_image:!1}),p=z(()=>{if(r.remove_banner_image)return null;if(i.promotion.banner)return i.promotion.banner;if(i.promotion.media){const s=i.promotion.media.find(e=>e.collection_name==="banner");return(s==null?void 0:s.original_url)||null}return null}),b=C(null),k=s=>{const e=s.target;if(e.files&&e.files[0]){r.uploaded_banner_image=e.files[0],r.remove_banner_image=!1;const d=e.files[0];d.type.startsWith("image/")&&(b.value=URL.createObjectURL(d))}else r.uploaded_banner_image=null,b.value=null},f=()=>{r.remove_banner_image=!0,r.uploaded_banner_image=null,b.value=null},_=()=>{r.transform(s=>({...s,_method:"PUT",title:{en:s.title.en||"","zh-TW":s.title["zh-TW"]||"","zh-CN":s.title["zh-CN"]||""},subtitle:{en:s.subtitle.en||"","zh-TW":s.subtitle["zh-TW"]||"","zh-CN":s.subtitle["zh-CN"]||""},remove_banner_image:!!s.remove_banner_image})).post(route("admin.promotions.update",i.promotion.id))},v=(s,e,d="en")=>s?typeof s=="string"?s:s[e]||s[d]||Object.values(s)[0]||"":"";return T(()=>{b.value&&URL.revokeObjectURL(b.value)}),(s,e)=>(a(),l(P,null,[x(o(N),{title:`Edit Promotion: ${v(i.promotion.title,"en")}`},null,8,["title"]),x(R,null,{default:y(()=>[t("div",E,[t("div",S,[t("div",L,[t("div",M,[t("form",{onSubmit:U(_,["prevent"])},[t("div",D,[t("fieldset",O,[e[14]||(e[14]=t("legend",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 px-1"},"Promotion Title (Translatable)",-1)),t("div",q,[t("div",null,[e[11]||(e[11]=t("label",{for:"title_en",class:"block text-xs font-medium text-gray-700 dark:text-gray-400"},"English",-1)),m(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=d=>o(r).title.en=d),id:"title_en",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm"},null,512),[[g,o(r).title.en]])]),t("div",null,[e[12]||(e[12]=t("label",{for:"title_zh_TW",class:"block text-xs font-medium text-gray-700 dark:text-gray-400"},"Traditional Chinese",-1)),m(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=d=>o(r).title["zh-TW"]=d),id:"title_zh_TW",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm"},null,512),[[g,o(r).title["zh-TW"]]])]),t("div",null,[e[13]||(e[13]=t("label",{for:"title_zh_CN",class:"block text-xs font-medium text-gray-700 dark:text-gray-400"},"Simplified Chinese",-1)),m(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=d=>o(r).title["zh-CN"]=d),id:"title_zh_CN",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm"},null,512),[[g,o(r).title["zh-CN"]]])])]),o(r).errors.title?(a(),l("div",F,u(o(r).errors.title),1)):n("",!0),o(r).errors["title.en"]?(a(),l("div",G,u(o(r).errors["title.en"]),1)):n("",!0),o(r).errors["title.zh-TW"]?(a(),l("div",$,u(o(r).errors["title.zh-TW"]),1)):n("",!0),o(r).errors["title.zh-CN"]?(a(),l("div",A,u(o(r).errors["title.zh-CN"]),1)):n("",!0)]),t("fieldset",H,[e[18]||(e[18]=t("legend",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 px-1"},"Promotion Subtitle (Translatable)",-1)),t("div",I,[t("div",null,[e[15]||(e[15]=t("label",{for:"subtitle_en",class:"block text-xs font-medium text-gray-700 dark:text-gray-400"},"English",-1)),m(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=d=>o(r).subtitle.en=d),id:"subtitle_en",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm"},null,512),[[g,o(r).subtitle.en]])]),t("div",null,[e[16]||(e[16]=t("label",{for:"subtitle_zh_TW",class:"block text-xs font-medium text-gray-700 dark:text-gray-400"},"Traditional Chinese",-1)),m(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=d=>o(r).subtitle["zh-TW"]=d),id:"subtitle_zh_TW",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm"},null,512),[[g,o(r).subtitle["zh-TW"]]])]),t("div",null,[e[17]||(e[17]=t("label",{for:"subtitle_zh_CN",class:"block text-xs font-medium text-gray-700 dark:text-gray-400"},"Simplified Chinese",-1)),m(t("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=d=>o(r).subtitle["zh-CN"]=d),id:"subtitle_zh_CN",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm"},null,512),[[g,o(r).subtitle["zh-CN"]]])])]),o(r).errors.subtitle?(a(),l("div",J,u(o(r).errors.subtitle),1)):n("",!0),o(r).errors["subtitle.en"]?(a(),l("div",K,u(o(r).errors["subtitle.en"]),1)):n("",!0),o(r).errors["subtitle.zh-TW"]?(a(),l("div",Q,u(o(r).errors["subtitle.zh-TW"]),1)):n("",!0),o(r).errors["subtitle.zh-CN"]?(a(),l("div",X,u(o(r).errors["subtitle.zh-CN"]),1)):n("",!0)]),t("div",null,[e[19]||(e[19]=t("label",{for:"url",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"URL *",-1)),m(t("input",{type:"url","onUpdate:modelValue":e[6]||(e[6]=d=>o(r).url=d),id:"url",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",required:""},null,512),[[g,o(r).url]]),o(r).errors.url?(a(),l("div",Y,u(o(r).errors.url),1)):n("",!0)]),t("div",null,[e[24]||(e[24]=t("label",{for:"uploaded_banner_image",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Banner Image",-1)),p.value&&!b.value?(a(),l("div",Z,[e[21]||(e[21]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-2"},"Current Banner:",-1)),t("div",ee,[t("div",te,[t("img",{src:p.value,alt:"Current promotion banner",class:"w-48 h-auto object-cover rounded-lg border border-gray-300 dark:border-gray-600"},null,8,re),t("button",{type:"button",onClick:f,class:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 text-xs leading-none opacity-75 group-hover:opacity-100 transition-opacity","aria-label":"Remove banner",title:"Remove current banner"}," Ã— ")]),t("div",{class:"text-sm text-gray-500 dark:text-gray-400"},[e[20]||(e[20]=t("p",null,"Current banner will be replaced if you upload a new one.",-1)),t("button",{type:"button",onClick:f,class:"text-red-600 hover:text-red-800 text-xs mt-1 underline"}," Remove current banner ")])])])):n("",!0),o(r).remove_banner_image&&!b.value&&!p.value?(a(),l("div",oe,e[22]||(e[22]=[t("div",{class:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-md p-3"},[t("div",{class:"flex"},[t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])]),t("div",{class:"ml-3"},[t("p",{class:"text-sm text-yellow-800 dark:text-yellow-200"}," Current banner will be removed when you save. Upload a new one below if needed. ")])])],-1)]))):n("",!0),b.value?(a(),l("div",ie,[e[23]||(e[23]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-2"},"New Banner Preview:",-1)),t("img",{src:b.value,alt:"New promotion banner preview",class:"w-48 h-auto object-cover rounded-lg border border-gray-300 dark:border-gray-600"},null,8,de)])):n("",!0),t("input",{type:"file",onChange:k,id:"uploaded_banner_image",accept:"image/*",class:"mt-1 block w-full text-sm text-gray-500 dark:text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 dark:file:bg-indigo-900 dark:file:text-indigo-300 dark:hover:file:bg-indigo-800"},null,32),o(r).errors.uploaded_banner_image?(a(),l("div",se,u(o(r).errors.uploaded_banner_image),1)):n("",!0),t("p",le,[p.value&&!o(r).remove_banner_image?(a(),l("span",ae,"Upload a new banner to replace the existing one.")):(a(),l("span",ne,"Upload a banner image (JPEG, PNG, WebP - max 10MB)."))])]),t("div",ue,[t("div",null,[e[25]||(e[25]=t("label",{for:"starts_at",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Start Date",-1)),m(t("input",{type:"datetime-local","onUpdate:modelValue":e[7]||(e[7]=d=>o(r).starts_at=d),id:"starts_at",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm"},null,512),[[g,o(r).starts_at]]),o(r).errors.starts_at?(a(),l("div",me,u(o(r).errors.starts_at),1)):n("",!0)]),t("div",null,[e[26]||(e[26]=t("label",{for:"ends_at",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"End Date",-1)),m(t("input",{type:"datetime-local","onUpdate:modelValue":e[8]||(e[8]=d=>o(r).ends_at=d),id:"ends_at",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm"},null,512),[[g,o(r).ends_at]]),o(r).errors.ends_at?(a(),l("div",ge,u(o(r).errors.ends_at),1)):n("",!0)])]),t("div",null,[e[27]||(e[27]=t("label",{for:"sort_order",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Sort Order",-1)),m(t("input",{type:"number","onUpdate:modelValue":e[9]||(e[9]=d=>o(r).sort_order=d),id:"sort_order",min:"0",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm"},null,512),[[g,o(r).sort_order]]),o(r).errors.sort_order?(a(),l("div",be,u(o(r).errors.sort_order),1)):n("",!0)]),t("div",pe,[m(t("input",{type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=d=>o(r).is_active=d),id:"is_active",class:"h-4 w-4 text-indigo-600 border-gray-300 dark:border-gray-700 dark:bg-gray-900 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded"},null,512),[[W,o(r).is_active]]),e[28]||(e[28]=t("label",{for:"is_active",class:"ml-2 block text-sm text-gray-900 dark:text-gray-100"},"Active",-1))]),o(r).errors.is_active?(a(),l("div",xe,u(o(r).errors.is_active),1)):n("",!0)]),t("div",fe,[x(o(V),{href:s.route("admin.promotions.index"),class:"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 mr-4 py-2 px-4 rounded-md border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 transition ease-in-out duration-150"},{default:y(()=>e[29]||(e[29]=[j("Cancel")])),_:1},8,["href"]),t("button",{type:"submit",disabled:o(r).processing,class:B(["inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-500 active:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition ease-in-out duration-150",{"opacity-25":o(r).processing}])}," Update Promotion ",10,ye)])],32)])])])])]),_:1})],64))}});export{Re as default};
