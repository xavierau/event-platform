import{d as E,c as $,s as q,C as P,a as d,o as u,b as l,e,m as A,w as s,f as o,P as T,g as n,p as U,F as c,r as _,j as B,t as g,k as v,v as N,E as H,l as x,i as F}from"./app-BlriFIqe.js";import{_ as K}from"./AppLayout.vue_vue_type_script_setup_true_lang-BPRGBHPc.js";import{_ as V}from"./index-n8QSRl2p.js";import{_ as m}from"./Label.vue_vue_type_script_setup_true_lang-XssgAD5J.js";import{_ as y}from"./Input.vue_vue_type_script_setup_true_lang-Ds4BPUgy.js";import{_ as p}from"./InputError.vue_vue_type_script_setup_true_lang-Cyvqxqv2.js";import{_ as O,a as L}from"./CardContent.vue_vue_type_script_setup_true_lang-RkHOXXKf.js";import{_ as M,a as S}from"./CardTitle.vue_vue_type_script_setup_true_lang-C_VUJY_V.js";import{c as W}from"./i18n-DEP6uGVt.js";import"./index-Bhpe8JcZ.js";import"./useForwardPropsEmits-BFEAxE1x.js";import"./useForwardExpose-CTSY01TP.js";import"./useFocusGuards-DE3wpZyr.js";import"./Teleport-XyWxSjNg.js";import"./VisuallyHidden-c1buR7Qf.js";import"./UserMenuContent.vue_vue_type_script_setup_true_lang-BKdqBXVk.js";import"./RovingFocusGroup-C8rdEAgk.js";import"./createLucideIcon-C1ebVwtv.js";import"./x-DhC37dsd.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BGa5dCta.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useToast-D6MTp1Xk.js";const Q={class:"py-12"},G={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},I={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg"},J={class:"p-6 lg:p-8 bg-white dark:bg-gray-800 dark:bg-gradient-to-bl dark:from-gray-700/50 dark:via-transparent border-b border-gray-200 dark:border-gray-700"},R={class:"flex justify-between items-center mb-6"},X={class:"border-b border-gray-200 dark:border-gray-700 mb-4"},Y={class:"-mb-px flex space-x-8","aria-label":"Tabs"},Z=["onClick"],h={class:"space-y-6 mt-4"},ee=["id","onUpdate:modelValue"],re=["value"],te=["value"],le=["value"],ae={key:0},oe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},se={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ie={class:"mt-6 flex justify-end space-x-4"},Me=E({__name:"Create",props:{statuses:{},availableLocales:{},timezones:{},eventOccurrences:{},errors:{}},setup(j){var C;const f=j,b=$(()=>Object.entries(f.availableLocales).map(([i,r])=>({key:i,label:r}))),w=q(W.value||(b.value.length>0?b.value[0].key:"en")),a=P({name:Object.fromEntries(Object.keys(f.availableLocales).map(i=>[i,""])),description:Object.fromEntries(Object.keys(f.availableLocales).map(i=>[i,""])),price:void 0,currency:"HKD",total_quantity:void 0,status:f.statuses&&f.statuses.length>0?((C=f.statuses.find(i=>i.value==="active"))==null?void 0:C.value)||f.statuses[0].value:"draft",availability_window_start:"",availability_window_end:"",min_per_order:1,max_per_order:void 0,timezone:"Asia/Hong_Kong",event_occurrence_ids:[]}),z=$(()=>f.statuses.map(i=>({value:i.value,label:i.label}))),D=()=>{a.transform(i=>({...i,price:typeof i.price=="number"&&i.price!==null?Math.round(i.price*100):i.price})).post(route("admin.ticket-definitions.store"),{onSuccess:()=>{alert("Ticket definition created successfully.")},onError:i=>{console.error("Create Error:",i);const r=Object.values(i).join(` 
 `);alert(r||"Please check the form for errors.")}})};return(i,r)=>(u(),d(c,null,[l(e(A),{title:"Create Ticket Definition"}),l(K,null,{default:s(()=>[o("div",Q,[o("div",G,[o("div",I,[o("div",J,[o("div",R,[r[11]||(r[11]=o("h1",{class:"text-2xl font-medium text-gray-900 dark:text-white"}," Create Ticket Definition ",-1)),l(e(T),{href:i.route("admin.ticket-definitions.index")},{default:s(()=>[l(e(V),{variant:"outline"},{default:s(()=>r[10]||(r[10]=[n("Back to List")])),_:1})]),_:1},8,["href"])]),o("form",{onSubmit:U(D,["prevent"])},[l(e(O),{class:"mb-6"},{default:s(()=>[l(e(M),null,{default:s(()=>[l(e(S),null,{default:s(()=>r[12]||(r[12]=[n("Translatable Information")])),_:1})]),_:1}),l(e(L),{class:"py-5 px-6"},{default:s(()=>[o("div",X,[o("nav",Y,[(u(!0),d(c,null,_(b.value,t=>(u(),d("button",{key:t.key,onClick:U(k=>w.value=t.key,["prevent"]),class:B([w.value===t.key?"border-indigo-500 text-indigo-600 dark:border-indigo-400 dark:text-indigo-300":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:border-gray-600","whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm focus:outline-none"])},g(t.label),11,Z))),128))])]),(u(!0),d(c,null,_(b.value,t=>v((u(),d("div",{key:t.key},[o("div",h,[o("div",null,[l(e(m),{for:`name_${t.key}`},{default:s(()=>[n("Name ("+g(t.label)+")",1)]),_:2},1032,["for"]),l(e(y),{id:`name_${t.key}`,type:"text",modelValue:e(a).name[t.key],"onUpdate:modelValue":k=>e(a).name[t.key]=k,class:"mt-1 block w-full"},null,8,["id","modelValue","onUpdate:modelValue"]),l(p,{message:e(a).errors[`name.${t.key}`],class:"mt-1"},null,8,["message"])]),o("div",null,[l(e(m),{for:`description_${t.key}`},{default:s(()=>[n("Description ("+g(t.label)+")",1)]),_:2},1032,["for"]),v(o("textarea",{id:`description_${t.key}`,"onUpdate:modelValue":k=>e(a).description[t.key]=k,rows:"4",class:"mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},null,8,ee),[[N,e(a).description[t.key]]]),l(p,{message:e(a).errors[`description.${t.key}`],class:"mt-1"},null,8,["message"])])])])),[[H,w.value===t.key]])),128))]),_:1})]),_:1}),l(e(O),null,{default:s(()=>[l(e(M),null,{default:s(()=>[l(e(S),null,{default:s(()=>r[13]||(r[13]=[n("Basic Information")])),_:1})]),_:1}),l(e(L),{class:"space-y-6"},{default:s(()=>[o("div",null,[l(e(m),{for:"price"},{default:s(()=>r[14]||(r[14]=[n("Price")])),_:1}),l(e(y),{id:"price",type:"number",step:"0.01",modelValue:e(a).price,"onUpdate:modelValue":r[0]||(r[0]=t=>e(a).price=t),modelModifiers:{number:!0},placeholder:"e.g., 10.00"},null,8,["modelValue"]),l(p,{message:e(a).errors.price,class:"mt-1"},null,8,["message"])]),o("div",null,[l(e(m),{for:"currency"},{default:s(()=>r[15]||(r[15]=[n("Currency")])),_:1}),l(e(y),{id:"currency",type:"text",modelValue:e(a).currency,"onUpdate:modelValue":r[1]||(r[1]=t=>e(a).currency=t),placeholder:"e.g., USD",maxlength:"3"},null,8,["modelValue"]),l(p,{message:e(a).errors.currency,class:"mt-1"},null,8,["message"])]),o("div",null,[l(e(m),{for:"total_quantity"},{default:s(()=>r[16]||(r[16]=[n("Total Quantity Available (leave blank for unlimited)")])),_:1}),l(e(y),{id:"total_quantity",type:"number",modelValue:e(a).total_quantity,"onUpdate:modelValue":r[2]||(r[2]=t=>e(a).total_quantity=t),modelModifiers:{number:!0},placeholder:"e.g., 100"},null,8,["modelValue"]),l(p,{message:e(a).errors.total_quantity,class:"mt-1"},null,8,["message"])]),o("div",null,[l(e(m),{for:"status"},{default:s(()=>r[17]||(r[17]=[n("Status")])),_:1}),v(o("select",{id:"status","onUpdate:modelValue":r[3]||(r[3]=t=>e(a).status=t),class:"mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},[r[18]||(r[18]=o("option",{disabled:"",value:""},"Select status",-1)),(u(!0),d(c,null,_(z.value,t=>(u(),d("option",{key:t.value,value:t.value},g(t.label),9,re))),128))],512),[[x,e(a).status]]),l(p,{message:e(a).errors.status,class:"mt-1"},null,8,["message"])]),o("div",null,[l(e(m),{for:"timezone"},{default:s(()=>r[19]||(r[19]=[n("Timezone")])),_:1}),v(o("select",{id:"timezone","onUpdate:modelValue":r[4]||(r[4]=t=>e(a).timezone=t),class:"mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},[r[20]||(r[20]=o("option",{value:null},"-- Select Timezone (uses server default) --",-1)),(u(!0),d(c,null,_(f.timezones,t=>(u(),d("option",{key:t,value:t},g(t),9,te))),128))],512),[[x,e(a).timezone]]),l(p,{message:e(a).errors.timezone,class:"mt-1"},null,8,["message"])]),o("div",null,[l(e(m),{for:"event_occurrence_ids"},{default:s(()=>r[21]||(r[21]=[n("Associated Event Occurrences (optional)")])),_:1}),v(o("select",{id:"event_occurrence_ids","onUpdate:modelValue":r[5]||(r[5]=t=>e(a).event_occurrence_ids=t),multiple:"",class:"mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",size:"6"},[(u(!0),d(c,null,_(f.eventOccurrences,t=>(u(),d("option",{key:t.id,value:t.id},[n(g(t.event_name)+" - "+g(t.name)+" ",1),t.start_at?(u(),d("span",ae,"("+g(t.start_at)+")",1)):F("",!0)],8,le))),128))],512),[[x,e(a).event_occurrence_ids]]),l(p,{message:e(a).errors.event_occurrence_ids,class:"mt-1"},null,8,["message"]),r[22]||(r[22]=o("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"}," Hold Ctrl/Cmd to select multiple occurrences. Leave empty to make this ticket available for all events. ",-1))]),o("div",oe,[o("div",null,[l(e(m),{for:"availability_window_start"},{default:s(()=>r[23]||(r[23]=[n("Availability Window Start (Local Time)")])),_:1}),l(e(y),{id:"availability_window_start",type:"datetime-local",modelValue:e(a).availability_window_start,"onUpdate:modelValue":r[6]||(r[6]=t=>e(a).availability_window_start=t)},null,8,["modelValue"]),l(p,{message:e(a).errors.availability_window_start,class:"mt-1"},null,8,["message"])]),o("div",null,[l(e(m),{for:"availability_window_end"},{default:s(()=>r[24]||(r[24]=[n("Availability Window End (Local Time)")])),_:1}),l(e(y),{id:"availability_window_end",type:"datetime-local",modelValue:e(a).availability_window_end,"onUpdate:modelValue":r[7]||(r[7]=t=>e(a).availability_window_end=t)},null,8,["modelValue"]),l(p,{message:e(a).errors.availability_window_end,class:"mt-1"},null,8,["message"])])]),o("div",se,[o("div",null,[l(e(m),{for:"min_per_order"},{default:s(()=>r[25]||(r[25]=[n("Min Per Order")])),_:1}),l(e(y),{id:"min_per_order",type:"number",modelValue:e(a).min_per_order,"onUpdate:modelValue":r[8]||(r[8]=t=>e(a).min_per_order=t),modelModifiers:{number:!0},placeholder:"Default: 1",min:"1"},null,8,["modelValue"]),l(p,{message:e(a).errors.min_per_order,class:"mt-1"},null,8,["message"])]),o("div",null,[l(e(m),{for:"max_per_order"},{default:s(()=>r[26]||(r[26]=[n("Max Per Order (optional)")])),_:1}),l(e(y),{id:"max_per_order",type:"number",modelValue:e(a).max_per_order,"onUpdate:modelValue":r[9]||(r[9]=t=>e(a).max_per_order=t),modelModifiers:{number:!0},placeholder:"e.g., 10",min:"1"},null,8,["modelValue"]),l(p,{message:e(a).errors.max_per_order,class:"mt-1"},null,8,["message"])])])]),_:1})]),_:1}),o("div",ie,[l(e(T),{href:i.route("admin.ticket-definitions.index")},{default:s(()=>[l(e(V),{type:"button",variant:"outline"},{default:s(()=>r[27]||(r[27]=[n("Cancel")])),_:1})]),_:1},8,["href"]),l(e(V),{type:"submit",disabled:e(a).processing},{default:s(()=>[n(g(e(a).processing?"Saving...":"Create Ticket Definition"),1)]),_:1},8,["disabled"])])],32)])])])])]),_:1})],64))}});export{Me as default};
