import{_ as y}from"./index-CgpMGGsi.js";import{a as T,b as V,c as N,d as B,_ as D}from"./DialogTitle.vue_vue_type_script_setup_true_lang-G0VSXZba.js";import{_ as F}from"./DialogClose.vue_vue_type_script_setup_true_lang-DUceK0RV.js";import{_ as I}from"./DialogDescription.vue_vue_type_script_setup_true_lang-qXEGH56B.js";import{_ as U}from"./Input.vue_vue_type_script_setup_true_lang-ZKJD8WZY.js";import{_ as L}from"./Checkbox.vue_vue_type_script_setup_true_lang-BMbPrjKB.js";import{_ as z}from"./Label.vue_vue_type_script_setup_true_lang-BxnTNpf2.js";import{d as E,s as h,D as P,c as b,h as j,o as d,w as a,b as s,e as o,f as m,g as f,a as u,F as A,r as K,t as _}from"./app-ByQyqBS_.js";const M={class:"mt-4 mb-6"},O={class:"max-h-80 overflow-y-auto border rounded-md p-1 space-y-1 bg-background"},q={class:"flex items-center space-x-3"},G={class:"font-medium"},H={class:"text-xs text-muted-foreground"},J={key:1,class:"text-center text-muted-foreground py-10"},Q={key:0},R={key:1},ae=E({__name:"TicketDefinitionSelector",props:{show:{type:Boolean},availableTicketDefinitions:{},initiallySelectedIds:{}},emits:["close","ticketDefinitionsSelected"],setup(w,{emit:k}){const l=w,p=k,r=h(""),i=h(new Set);P(()=>[l.show,l.initiallySelectedIds],()=>{l.show?i.value=new Set(l.initiallySelectedIds||[]):r.value=""},{immediate:!0,deep:!0});const v=b(()=>r.value?l.availableTicketDefinitions.filter(n=>n.name.toLowerCase().includes(r.value.toLowerCase())):l.availableTicketDefinitions),x=(n,e)=>{try{return new Intl.NumberFormat(void 0,{style:"currency",currency:e}).format(n/100)}catch{return`${(n/100).toFixed(2)} ${e}`}},$=(n,e)=>{(typeof e=="boolean"?e:!1)?i.value.add(n):i.value.delete(n)},S=()=>{p("ticketDefinitionsSelected",Array.from(i.value)),c()},c=()=>{p("close")},g=b(()=>i.value.size>0);return(n,e)=>(d(),j(o(D),{open:n.show,"onUpdate:open":e[1]||(e[1]=t=>!t&&c())},{default:a(()=>[s(o(T),{class:"sm:max-w-lg",onEscapeKeyDown:c,onPointerDownOutside:c},{default:a(()=>[s(o(V),null,{default:a(()=>[s(o(N),null,{default:a(()=>e[2]||(e[2]=[f("Select Ticket Definitions")])),_:1}),s(o(I),null,{default:a(()=>e[3]||(e[3]=[f(" Choose from existing ticket definitions to associate. ")])),_:1})]),_:1}),m("div",M,[s(o(U),{type:"text",placeholder:"Search tickets by name...",modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=t=>r.value=t),class:"w-full"},null,8,["modelValue"])]),m("div",O,[v.value.length>0?(d(!0),u(A,{key:0},K(v.value,t=>(d(),u("div",{key:t.id,class:"flex items-center justify-between p-3 rounded-md hover:bg-muted/50 transition-colors"},[m("div",q,[s(o(L),{id:`td-select-${t.id}`,"model-value":i.value.has(t.id),"onUpdate:modelValue":C=>$(t.id,C)},null,8,["id","model-value","onUpdate:modelValue"]),s(o(z),{for:`td-select-${t.id}`,class:"cursor-pointer"},{default:a(()=>[m("span",G,_(t.name),1),m("div",H,_(x(t.price,t.currency_code)),1)]),_:2},1032,["for"])])]))),128)):(d(),u("div",J,[r.value?(d(),u("p",Q,"No ticket definitions match your search.")):(d(),u("p",R,"No ticket definitions available to select."))]))]),s(o(B),{class:"mt-6"},{default:a(()=>[s(o(F),{"as-child":""},{default:a(()=>[s(o(y),{type:"button",variant:"outline",onClick:c},{default:a(()=>e[4]||(e[4]=[f("Cancel")])),_:1})]),_:1}),s(o(y),{type:"button",onClick:S,disabled:!g.value},{default:a(()=>[f(" Confirm Selection ("+_(i.value.size)+") ",1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]))}});export{ae as _};
