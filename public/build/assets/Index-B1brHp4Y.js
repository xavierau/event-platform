import{d as H,n as J,c as K,C as Q,s as h,a as g,o as d,b as s,e as r,m as R,w as a,f as n,P as c,g as l,h as N,i as _,F as v,r as T,t as i,j as V,k as w,v as X,l as M,W as Y}from"./app-CBcdSYGl.js";import{_ as Z}from"./AppLayout.vue_vue_type_script_setup_true_lang-Cykr0hji.js";import{_ as ee,a as te,b as re,c as ae,d as se}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BK9OOHaH.js";import{_ as A}from"./index-BH95GTik.js";import{g as F}from"./i18n-Ddk1guED.js";import{l as oe}from"./lodash-CuiMI1Jc.js";import{_ as ne}from"./PageHeader.vue_vue_type_script_setup_true_lang-BUVGkEvy.js";import{_ as le,a as ie}from"./AdminDataTable.vue_vue_type_script_setup_true_lang-D6SAByjV.js";import{_ as B,a as u,b as f}from"./TableHeader.vue_vue_type_script_setup_true_lang-BC5w2gzk.js";import{_ as de}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-B_RuNNQq.js";import"./useForwardPropsEmits-BUmNaTt4.js";import"./useForwardExpose-2b0zYAwj.js";import"./useFocusGuards-BRQO_hst.js";import"./Teleport-BsQYp6hP.js";import"./VisuallyHidden-dajNmunB.js";import"./UserMenuContent.vue_vue_type_script_setup_true_lang-CPh5rXLj.js";import"./RovingFocusGroup-3mJjWm0y.js";import"./createLucideIcon-dtD6wVEP.js";import"./x-Br0THnaC.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C3rar4t_.js";import"./useToast-C_yoBaOs.js";const ue={class:"py-12"},ge={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},fe={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg"},me={class:"p-6 lg:p-8 bg-white dark:bg-gray-800 dark:bg-gradient-to-bl dark:from-gray-700/50 dark:via-transparent border-b border-gray-200 dark:border-gray-700"},pe=["value"],xe={key:0},ye={key:0,class:"text-gray-600 dark:text-gray-400"},be={key:1,class:"text-gray-600 dark:text-gray-400"},_e={key:1,class:"text-gray-500"},ke={class:"text-sm"},ce={class:"text-gray-900 dark:text-white"},ve={key:0,class:"text-gray-500"},we=["onClick"],Ce={class:"py-4 text-sm text-gray-600 dark:text-gray-400"},De=H({__name:"Index",props:{coupons:{},organizers:{},filters:{}},setup(E){var z,S,U;const I=J(),k=K(()=>I.props.locale),y=E,m=Q({search:((z=y.filters)==null?void 0:z.search)||"",organizer_id:((S=y.filters)==null?void 0:S.organizer_id)||"",type:((U=y.filters)==null?void 0:U.type)||"",per_page:y.coupons.per_page||15}),b=h(!1),x=h(null),p=oe.throttle(()=>{m.get(route("admin.coupons.index"),{preserveState:!0,replace:!0})},300),L=(o,e)=>{x.value={id:o,name:e},b.value=!0},C=()=>{b.value=!1,x.value=null},O=()=>{x.value&&Y.delete(route("admin.coupons.destroy",x.value.id),{onSuccess:()=>C(),preserveState:!1})},D=o=>{if(!o)return"N/A";const e={year:"numeric",month:"short",day:"numeric"};return new Date(o).toLocaleDateString(k.value,e)},P=o=>o==="single_use"?"Single Use":"Multi Use",W=(o,e)=>e==="percentage"?`${o}%`:`$${(o/100).toFixed(2)}`,j=o=>{var e;return((e=o.user_coupons_count)==null?void 0:e.toString())||"0"},$=o=>{const e=new Date;return o.valid_from&&new Date(o.valid_from)>e?"Upcoming":o.expires_at&&new Date(o.expires_at)<e?"Expired":"Active"},q=o=>{switch(o){case"single_use":return"bg-blue-100 text-blue-800 dark:bg-blue-700 dark:text-blue-200";case"multi_use":return"bg-green-100 text-green-800 dark:bg-green-700 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-200"}},G=o=>{switch(o.toLowerCase()){case"active":return"bg-green-100 text-green-800 dark:bg-green-700 dark:text-green-200";case"expired":return"bg-red-100 text-red-800 dark:bg-red-600 dark:text-red-100";case"upcoming":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-600 dark:text-yellow-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-500 dark:text-gray-100"}};return(o,e)=>(d(),g(v,null,[s(r(R),{title:"Coupons"}),s(Z,null,{default:a(()=>[n("div",ue,[n("div",ge,[n("div",fe,[n("div",me,[s(ne,{title:"Coupon Management",subtitle:"Manage coupon templates and campaigns"},{actions:a(()=>[s(r(c),{href:o.route("admin.coupons.create"),class:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-500 active:bg-indigo-700 focus:outline-none focus:border-indigo-700 focus:ring focus:ring-indigo-200 disabled:opacity-25 transition"},{default:a(()=>e[7]||(e[7]=[l(" Create New Coupon ")])),_:1},8,["href"])]),_:1}),s(le,null,{filters:a(()=>[n("div",null,[e[8]||(e[8]=n("label",{for:"search_name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Search by Name or Code",-1)),w(n("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>r(m).search=t),onInput:e[1]||(e[1]=(...t)=>r(p)&&r(p)(...t)),id:"search_name",placeholder:"Search coupons...",class:"mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},null,544),[[X,r(m).search]])]),n("div",null,[e[10]||(e[10]=n("label",{for:"organizer_filter",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Organizer",-1)),w(n("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>r(m).organizer_id=t),onChange:e[3]||(e[3]=(...t)=>r(p)&&r(p)(...t)),id:"organizer_filter",class:"mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},[e[9]||(e[9]=n("option",{value:""},"All Organizers",-1)),(d(!0),g(v,null,T(o.organizers,t=>(d(),g("option",{key:t.id,value:t.id},i(r(F)(t.name,k.value)),9,pe))),128))],544),[[M,r(m).organizer_id]])]),n("div",null,[e[12]||(e[12]=n("label",{for:"type_filter",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Type",-1)),w(n("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>r(m).type=t),onChange:e[5]||(e[5]=(...t)=>r(p)&&r(p)(...t)),id:"type_filter",class:"mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},e[11]||(e[11]=[n("option",{value:""},"All Types",-1),n("option",{value:"single_use"},"Single Use",-1),n("option",{value:"multi_use"},"Multi Use",-1)]),544),[[M,r(m).type]])])]),header:a(()=>[s(r(f),null,{default:a(()=>e[13]||(e[13]=[l("Code")])),_:1}),s(r(f),null,{default:a(()=>e[14]||(e[14]=[l("Name")])),_:1}),s(r(f),null,{default:a(()=>e[15]||(e[15]=[l("Organizer")])),_:1}),s(r(f),null,{default:a(()=>e[16]||(e[16]=[l("Type")])),_:1}),s(r(f),null,{default:a(()=>e[17]||(e[17]=[l("Discount")])),_:1}),s(r(f),null,{default:a(()=>e[18]||(e[18]=[l("Valid Period")])),_:1}),s(r(f),null,{default:a(()=>e[19]||(e[19]=[l("Usage")])),_:1}),s(r(f),null,{default:a(()=>e[20]||(e[20]=[l("Status")])),_:1}),s(r(f),{class:"text-right"},{default:a(()=>e[21]||(e[21]=[l("Actions")])),_:1})]),body:a(()=>[o.coupons.data&&o.coupons.data.length===0?(d(),N(r(B),{key:0},{default:a(()=>[s(r(u),{colspan:"9",class:"text-center"},{default:a(()=>e[22]||(e[22]=[l("No coupons found")])),_:1})]),_:1})):_("",!0),(d(!0),g(v,null,T(o.coupons.data,t=>(d(),N(r(B),{key:t.id},{default:a(()=>[s(r(u),{class:"font-mono text-sm font-semibold text-indigo-600 dark:text-indigo-400"},{default:a(()=>[l(i(t.code),1)]),_:2},1024),s(r(u),{class:"font-medium text-gray-900 dark:text-white"},{default:a(()=>[l(i(t.name),1)]),_:2},1024),s(r(u),null,{default:a(()=>[l(i(t.organizer?r(F)(t.organizer.name,k.value):"N/A"),1)]),_:2},1024),s(r(u),null,{default:a(()=>[n("span",{class:V([q(t.type),"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},i(P(t.type)),3)]),_:2},1024),s(r(u),null,{default:a(()=>[l(i(W(t.discount_value,t.discount_type)),1)]),_:2},1024),s(r(u),{class:"text-sm"},{default:a(()=>[t.valid_from||t.expires_at?(d(),g("div",xe,[t.valid_from?(d(),g("div",ye,"From: "+i(D(t.valid_from)),1)):_("",!0),t.expires_at?(d(),g("div",be,"Until: "+i(D(t.expires_at)),1)):_("",!0)])):(d(),g("div",_e,"No restrictions"))]),_:2},1024),s(r(u),null,{default:a(()=>[n("div",ke,[n("div",ce,i(j(t)),1),t.max_issuance?(d(),g("div",ve,"of "+i(t.max_issuance)+" max",1)):_("",!0)])]),_:2},1024),s(r(u),null,{default:a(()=>[n("span",{class:V([G($(t)),"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},i($(t)),3)]),_:2},1024),s(r(u),{class:"text-right"},{default:a(()=>[s(r(c),{href:o.route("admin.coupons.show",t.id),class:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-600 mr-3"},{default:a(()=>e[23]||(e[23]=[l("View")])),_:2},1032,["href"]),s(r(c),{href:o.route("admin.coupons.edit",t.id),class:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-600 mr-3"},{default:a(()=>e[24]||(e[24]=[l("Edit")])),_:2},1032,["href"]),n("button",{onClick:$e=>L(t.id,t.name),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-600"},"Delete",8,we)]),_:2},1024)]),_:2},1024))),128))]),_:1}),s(ie,{links:o.coupons.links,from:o.coupons.from,to:o.coupons.to,total:o.coupons.total},null,8,["links","from","to","total"])])])])]),s(r(ee),{open:b.value,"onUpdate:open":e[6]||(e[6]=t=>b.value=t)},{default:a(()=>[s(r(te),{class:"sm:max-w-[425px]"},{default:a(()=>{var t;return[s(r(re),null,{default:a(()=>[s(r(ae),null,{default:a(()=>e[25]||(e[25]=[l("Delete Coupon")])),_:1})]),_:1}),n("p",Ce,' Are you sure you want to delete the coupon "'+i((t=x.value)==null?void 0:t.name)+'"? This action cannot be undone. ',1),s(r(se),null,{default:a(()=>[s(A,{variant:"outline",onClick:C},{default:a(()=>e[26]||(e[26]=[l("Cancel")])),_:1}),s(A,{variant:"destructive",onClick:O,class:"ml-3"},{default:a(()=>e[27]||(e[27]=[l("Delete Coupon")])),_:1})]),_:1})]}),_:1})]),_:1},8,["open"])]),_:1})],64))}}),Ke=de(De,[["__scopeId","data-v-29ecc9f6"]]);export{Ke as default};
