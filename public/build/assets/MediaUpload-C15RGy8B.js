import{d as w,s as x,c as C,D as v,a as i,o as r,f as o,i as c,g as N,t as u,F as b,r as h}from"./app-BlriFIqe.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";const $={class:"media-upload-container border dark:border-gray-700 p-4 rounded-md"},A=["for"],B={key:0,class:"text-xs"},S={key:0,class:"mb-4 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3"},z=["src","alt"],j=["title"],E=["onClick"],L=["id","multiple","accept"],D={key:0,class:"text-xs text-amber-600 dark:text-amber-500 mt-1"},R={key:1,class:"mt-4 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3"},V=["src","alt"],X=["title"],I=["onClick"],O=w({__name:"MediaUpload",props:{modelValue:{},existingMedia:{},collectionName:{},label:{default:"Upload Media"},multiple:{type:Boolean,default:!1},accept:{default:"image/*"},maxFiles:{default:5},maxFileSizeMb:{default:2}},emits:["update:modelValue","remove-existing"],setup(y,{emit:_}){const l=y,g=_,a=x([]),s=x([]),p=C(()=>`media-upload-${l.collectionName}-${Math.random().toString(36).substring(7)}`);v(()=>l.existingMedia,e=>{e?s.value=Array.isArray(e)?[...e]:[e]:s.value=[]},{immediate:!0,deep:!0}),v(a,e=>{l.multiple?g("update:modelValue",e):g("update:modelValue",e.length>0?e[0]:null)});const k=e=>{const n=e.target;if(n.files){let t=Array.from(n.files);t=t.filter(d=>d.size>l.maxFileSizeMb*1024*1024?(console.warn(`File ${d.name} is too large (max ${l.maxFileSizeMb}MB).`),!1):!0),l.multiple?a.value.length+t.length>l.maxFiles?(console.warn(`Cannot upload more than ${l.maxFiles} files.`),a.value=[...a.value,...t.slice(0,l.maxFiles-a.value.length)]):a.value=[...a.value,...t]:a.value=t.length>0?[t[0]]:[]}n.value=""},F=e=>{a.value.splice(e,1)},M=e=>{s.value=s.value.filter(n=>n.id!==e.id),g("remove-existing",{collection:l.collectionName,id:e.id})},f=e=>e instanceof File?URL.createObjectURL(e):e.thumbnail_url||e.preview_url||e.original_url,m=e=>e instanceof File?e.name:e.file_name||e.name;return(e,n)=>(r(),i("div",$,[o("label",{for:p.value,class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[N(u(e.label)+" ",1),e.multiple?(r(),i("span",B,"(Max "+u(l.maxFiles)+")",1)):c("",!0)],8,A),s.value.length>0?(r(),i("div",S,[(r(!0),i(b,null,h(s.value,t=>(r(),i("div",{key:t.id,class:"relative group border dark:border-gray-600 rounded-md p-1.5"},[o("img",{src:f(t),alt:m(t),class:"h-24 w-full object-cover rounded-md bg-gray-100 dark:bg-gray-700"},null,8,z),o("p",{class:"text-xs text-gray-500 dark:text-gray-400 truncate mt-1",title:m(t)},u(m(t)),9,j),o("button",{type:"button",onClick:d=>M(t),class:"absolute top-1 right-1 bg-red-500 hover:bg-red-700 text-white text-xxs p-1 rounded-full opacity-75 group-hover:opacity-100 transition-opacity focus:outline-none focus:ring-2 focus:ring-red-500/50"}," X ",8,E)]))),128))])):c("",!0),o("div",null,[o("input",{id:p.value,type:"file",multiple:l.multiple,accept:l.accept,onChange:k,class:"block w-full text-sm text-gray-500 dark:text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 dark:file:bg-indigo-800 file:text-indigo-700 dark:file:text-indigo-300 hover:file:bg-indigo-100 dark:hover:file:bg-indigo-700 cursor-pointer"},null,40,L),!l.multiple&&a.value.length>0&&s.value.length>0&&l.existingMedia&&!Array.isArray(l.existingMedia)?(r(),i("p",D,"Uploading a new file will replace the existing one.")):c("",!0)]),a.value.length>0?(r(),i("div",R,[(r(!0),i(b,null,h(a.value,(t,d)=>(r(),i("div",{key:d,class:"relative group border dark:border-gray-600 rounded-md p-1.5"},[o("img",{src:f(t),alt:t.name,class:"h-24 w-full object-cover rounded-md bg-gray-100 dark:bg-gray-700"},null,8,V),o("p",{class:"text-xs text-gray-500 dark:text-gray-400 truncate mt-1",title:t.name},u(t.name),9,X),o("button",{type:"button",onClick:P=>F(d),class:"absolute top-1 right-1 bg-red-500 hover:bg-red-700 text-white text-xxs p-1 rounded-full opacity-75 group-hover:opacity-100 transition-opacity focus:outline-none focus:ring-2 focus:ring-red-500/50"}," X ",8,I)]))),128))])):c("",!0)]))}}),G=U(O,[["__scopeId","data-v-9d3d2b9f"]]);export{G as M};
