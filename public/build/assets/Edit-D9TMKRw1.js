import{d as S,C as W,a as d,o,b as g,e as l,m as h,w as v,f as t,p as F,i as m,k as a,v as _,t as u,F as x,r as b,l as k,q as E,P as M,g as A,j as O}from"./app-rodjFhkq.js";import{_ as P}from"./AppLayout.vue_vue_type_script_setup_true_lang-Buz0nKNg.js";import{_ as f}from"./RichTextEditor.vue_vue_type_script_setup_true_lang-Cu0nkxAL.js";import{M as z}from"./MediaUpload-CcUck6Cg.js";import"./index-5oMWKzEe.js";import"./index-DeeF04vq.js";import"./useForwardPropsEmits-ZZ3RNL7N.js";import"./useForwardExpose-DRsK3r8k.js";import"./useFocusGuards-D8ysoiey.js";import"./Teleport-BRNRYUpo.js";import"./VisuallyHidden-CpssyYY4.js";import"./UserMenuContent.vue_vue_type_script_setup_true_lang-B7Wpw3cO.js";import"./RovingFocusGroup-DAn6leQC.js";import"./createLucideIcon-Bs6SLvAa.js";import"./x-B8Nct_xv.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-slh6utue.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useToast-SC79Q5uZ.js";const $={class:"py-12"},R={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},I={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},L={class:"p-6 md:p-8 text-gray-900 dark:text-gray-100"},D={class:"space-y-6"},J={class:"border dark:border-gray-700 p-4 rounded-md"},j={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-2"},B={key:0,class:"input-error"},K={key:0,class:"input-error"},q={class:"border dark:border-gray-700 p-4 rounded-md"},G={class:"space-y-4 mt-2"},H={key:0,class:"input-error"},Q={key:0,class:"input-error mt-1"},X={key:1,class:"input-error mt-1"},Y={key:2,class:"input-error mt-1"},Z={key:3,class:"input-error mt-1"},ee={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ie=["value"],te={key:0,class:"input-error"},le=["disabled"],se=["value"],re={key:0,class:"input-error"},ne={class:"border dark:border-gray-700 p-4 rounded-md"},de={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-2"},oe={key:0,class:"input-error"},ae={class:"border dark:border-gray-700 p-4 rounded-md"},ue={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-2"},me={key:0,class:"input-error"},_e={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ge={class:"border dark:border-gray-700 p-4 rounded-md md:col-span-2"},pe={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-2"},ye={key:0,class:"input-error"},ce={key:0,class:"input-error"},xe={key:0,class:"input-error"},fe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ve={key:0,class:"input-error"},be={key:0,class:"input-error"},ke={class:"flex items-center"},ze={key:4,class:"input-error"},Ce={class:"mt-8 flex justify-end space-x-3"},Ve=["disabled"],Je=S({__name:"Edit",props:{venue:{},countries:{},states:{}},setup(C){const n=C,i=W({id:n.venue.id,name:n.venue.name||{en:"","zh-TW":"","zh-CN":""},slug:n.venue.slug||"",description:n.venue.description||{en:"","zh-TW":"","zh-CN":""},address_line_1:n.venue.address_line_1||{en:"","zh-TW":"","zh-CN":""},address_line_2:n.venue.address_line_2||{en:"","zh-TW":"","zh-CN":""},city:n.venue.city||{en:"","zh-TW":"","zh-CN":""},postal_code:n.venue.postal_code||"",country_id:n.venue.country_id||null,state_id:n.venue.state_id||null,latitude:n.venue.latitude||null,longitude:n.venue.longitude||null,contact_email:n.venue.contact_email||"",contact_phone:n.venue.contact_phone||"",website_url:n.venue.website_url||"",seating_capacity:n.venue.seating_capacity||null,is_active:n.venue.is_active===void 0?!0:n.venue.is_active,organizer_id:n.venue.organizer_id||null,uploaded_main_image:null,existing_main_image:n.venue.existing_main_image||null,removed_main_image_id:null,uploaded_gallery_images:[],existing_gallery_images:n.venue.existing_gallery_images||[],removed_gallery_image_ids:[]}),V=()=>{n.venue.id&&(console.log("Original form data before transform:",JSON.parse(JSON.stringify(i,(r,e)=>e instanceof File?`File(${e.name})`:Array.isArray(e)&&e.length>0&&e.every(s=>s instanceof File)?e.map(s=>`File(${s.name})`):e))),i.transform(r=>{const e={id:r.id,slug:r.slug,postal_code:r.postal_code,country_id:r.country_id,state_id:r.state_id,latitude:r.latitude,longitude:r.longitude,contact_email:r.contact_email,contact_phone:r.contact_phone,website_url:r.website_url,seating_capacity:r.seating_capacity,is_active:r.is_active,organizer_id:r.organizer_id,name:r.name,description:r.description,address_line_1:r.address_line_1,address_line_2:r.address_line_2,city:r.city,removed_main_image_id:r.removed_main_image_id,removed_gallery_image_ids:r.removed_gallery_image_ids&&r.removed_gallery_image_ids.length>0?r.removed_gallery_image_ids:[]};return r.uploaded_main_image instanceof File?e.uploaded_main_image=r.uploaded_main_image:e.uploaded_main_image=null,r.uploaded_gallery_images&&r.uploaded_gallery_images.length>0&&r.uploaded_gallery_images.every(s=>s instanceof File)?e.uploaded_gallery_images=r.uploaded_gallery_images:e.uploaded_gallery_images=[],console.log("Data after transform (to be submitted):",JSON.parse(JSON.stringify(e,(s,p)=>p instanceof File?`File(${p.name})`:Array.isArray(p)&&p.length>0&&p.every(c=>c instanceof File)?p.map(c=>`File(${c.name})`):p))),e._method="PUT",e}),console.log("Submitting PUT request to:",route("admin.venues.update",n.venue.id)),i.post(route("admin.venues.update",n.venue.id),{preserveScroll:!0,preserveState:!0,onSuccess:r=>{console.log("Venue update successful:",r.props)},onError:r=>{console.error("Venue update failed with errors:",r)},onFinish:()=>{console.log("Venue update submission process finished.")}}))},N=r=>{r.collection==="main_image"&&(i.removed_main_image_id=r.id,i.existing_main_image=null)},T=r=>{r.collection==="gallery_images"&&(i.removed_gallery_image_ids.includes(r.id)||i.removed_gallery_image_ids.push(r.id),i.existing_gallery_images=i.existing_gallery_images.filter(e=>e.id!==r.id))},y=(r,e="en",s="en")=>r?typeof r=="string"?r:r[e]||r[s]||Object.values(r)[0]||"":"",w=[{id:1,name:{en:"Hong Kong SAR China"}},{id:2,name:{en:"Macau SAR China"}}],U=[{id:1,country_id:1,name:{en:"Hong Kong Island"}},{id:2,country_id:1,name:{en:"Kowloon"}}];return(r,e)=>(o(),d(x,null,[g(l(h),{title:`Edit Venue: ${y(l(i).name)}`},null,8,["title"]),g(P,null,{default:v(()=>[t("div",$,[t("div",R,[t("div",I,[t("div",L,[t("form",{onSubmit:F(V,["prevent"])},[t("div",D,[t("fieldset",J,[e[28]||(e[28]=t("legend",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 px-1"},"Venue Name",-1)),t("div",j,[t("div",null,[e[25]||(e[25]=t("label",{for:"name_en",class:"block text-xs font-medium text-gray-700 dark:text-gray-400"},"English",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>l(i).name.en=s),id:"name_en",class:"mt-1 block w-full input-sm"},null,512),[[_,l(i).name.en]])]),t("div",null,[e[26]||(e[26]=t("label",{for:"name_zh_TW",class:"block text-xs font-medium text-gray-700 dark:text-gray-400"},"Traditional Chinese",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>l(i).name["zh-TW"]=s),id:"name_zh_TW",class:"mt-1 block w-full input-sm"},null,512),[[_,l(i).name["zh-TW"]]])]),t("div",null,[e[27]||(e[27]=t("label",{for:"name_zh_CN",class:"block text-xs font-medium text-gray-700 dark:text-gray-400"},"Simplified Chinese",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=s=>l(i).name["zh-CN"]=s),id:"name_zh_CN",class:"mt-1 block w-full input-sm"},null,512),[[_,l(i).name["zh-CN"]]])])]),l(i).errors.name?(o(),d("div",B,u(l(i).errors.name),1)):m("",!0)]),t("div",null,[e[29]||(e[29]=t("label",{for:"slug",class:"label"},"Slug",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=s=>l(i).slug=s),id:"slug",class:"mt-1 block w-full input"},null,512),[[_,l(i).slug]]),l(i).errors.slug?(o(),d("div",K,u(l(i).errors.slug),1)):m("",!0)]),t("fieldset",q,[e[33]||(e[33]=t("legend",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 px-1"},"Description",-1)),t("div",G,[t("div",null,[e[30]||(e[30]=t("label",{for:"description_en",class:"block text-xs font-medium text-gray-700 dark:text-gray-400 mb-1"},"English",-1)),g(f,{modelValue:l(i).description.en,"onUpdate:modelValue":e[4]||(e[4]=s=>l(i).description.en=s),id:"description_en"},null,8,["modelValue"])]),t("div",null,[e[31]||(e[31]=t("label",{for:"description_zh_TW",class:"block text-xs font-medium text-gray-700 dark:text-gray-400 mb-1"},"Traditional Chinese",-1)),g(f,{modelValue:l(i).description["zh-TW"],"onUpdate:modelValue":e[5]||(e[5]=s=>l(i).description["zh-TW"]=s),id:"description_zh_TW"},null,8,["modelValue"])]),t("div",null,[e[32]||(e[32]=t("label",{for:"description_zh_CN",class:"block text-xs font-medium text-gray-700 dark:text-gray-400 mb-1"},"Simplified Chinese",-1)),g(f,{modelValue:l(i).description["zh-CN"],"onUpdate:modelValue":e[6]||(e[6]=s=>l(i).description["zh-CN"]=s),id:"description_zh_CN"},null,8,["modelValue"])])]),l(i).errors.description?(o(),d("div",H,u(l(i).errors.description),1)):m("",!0)]),g(z,{modelValue:l(i).uploaded_main_image,"onUpdate:modelValue":e[7]||(e[7]=s=>l(i).uploaded_main_image=s),existingMedia:l(i).existing_main_image,collectionName:"featured_image",label:"Main Image",multiple:!1,onRemoveExisting:N},null,8,["modelValue","existingMedia"]),l(i).errors.uploaded_main_image?(o(),d("div",Q,u(l(i).errors.uploaded_main_image),1)):m("",!0),l(i).errors.removed_main_image_id?(o(),d("div",X,u(l(i).errors.removed_main_image_id),1)):m("",!0),g(z,{modelValue:l(i).uploaded_gallery_images,"onUpdate:modelValue":e[8]||(e[8]=s=>l(i).uploaded_gallery_images=s),existingMedia:l(i).existing_gallery_images,collectionName:"gallery",label:"Gallery Images",multiple:!0,maxFiles:10,onRemoveExisting:T},null,8,["modelValue","existingMedia"]),l(i).errors.uploaded_gallery_images?(o(),d("div",Y,u(l(i).errors.uploaded_gallery_images),1)):m("",!0),l(i).errors.removed_gallery_image_ids?(o(),d("div",Z,u(l(i).errors.removed_gallery_image_ids),1)):m("",!0),t("div",ee,[t("div",null,[e[35]||(e[35]=t("label",{for:"country_id",class:"label"},"Country",-1)),a(t("select",{"onUpdate:modelValue":e[9]||(e[9]=s=>l(i).country_id=s),id:"country_id",class:"mt-1 block w-full input"},[e[34]||(e[34]=t("option",{value:null},"-- Select Country --",-1)),(o(!0),d(x,null,b(n.countries||w,s=>(o(),d("option",{key:s.id,value:s.id},u(y(s.name)),9,ie))),128))],512),[[k,l(i).country_id]]),l(i).errors.country_id?(o(),d("div",te,u(l(i).errors.country_id),1)):m("",!0)]),t("div",null,[e[37]||(e[37]=t("label",{for:"state_id",class:"label"},"State/Province",-1)),a(t("select",{"onUpdate:modelValue":e[10]||(e[10]=s=>l(i).state_id=s),id:"state_id",class:"mt-1 block w-full input",disabled:!l(i).country_id},[e[36]||(e[36]=t("option",{value:null},"-- Select State/Province --",-1)),(o(!0),d(x,null,b((n.states||U).filter(s=>s.country_id===l(i).country_id),s=>(o(),d("option",{key:s.id,value:s.id},u(y(s.name)),9,se))),128))],8,le),[[k,l(i).state_id]]),l(i).errors.state_id?(o(),d("div",re,u(l(i).errors.state_id),1)):m("",!0)])]),t("fieldset",ne,[e[41]||(e[41]=t("legend",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 px-1"},"Address Line 1",-1)),t("div",de,[t("div",null,[e[38]||(e[38]=t("label",{for:"address_line_1_en",class:"block text-xs font-medium text-gray-700 dark:text-gray-400"},"English",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[11]||(e[11]=s=>l(i).address_line_1.en=s),id:"address_line_1_en",class:"mt-1 block w-full input-sm"},null,512),[[_,l(i).address_line_1.en]])]),t("div",null,[e[39]||(e[39]=t("label",{for:"address_line_1_zh_TW",class:"block text-xs font-medium text-gray-700 dark:text-gray-400"},"Traditional Chinese",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[12]||(e[12]=s=>l(i).address_line_1["zh-TW"]=s),id:"address_line_1_zh_TW",class:"mt-1 block w-full input-sm"},null,512),[[_,l(i).address_line_1["zh-TW"]]])]),t("div",null,[e[40]||(e[40]=t("label",{for:"address_line_1_zh_CN",class:"block text-xs font-medium text-gray-700 dark:text-gray-400"},"Simplified Chinese",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[13]||(e[13]=s=>l(i).address_line_1["zh-CN"]=s),id:"address_line_1_zh_CN",class:"mt-1 block w-full input-sm"},null,512),[[_,l(i).address_line_1["zh-CN"]]])])]),l(i).errors.address_line_1?(o(),d("div",oe,u(l(i).errors.address_line_1),1)):m("",!0)]),t("fieldset",ae,[e[45]||(e[45]=t("legend",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 px-1"},"Address Line 2 (Optional)",-1)),t("div",ue,[t("div",null,[e[42]||(e[42]=t("label",{for:"address_line_2_en",class:"block text-xs font-medium text-gray-700 dark:text-gray-400"},"English",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[14]||(e[14]=s=>l(i).address_line_2.en=s),id:"address_line_2_en",class:"mt-1 block w-full input-sm"},null,512),[[_,l(i).address_line_2.en]])]),t("div",null,[e[43]||(e[43]=t("label",{for:"address_line_2_zh_TW",class:"block text-xs font-medium text-gray-700 dark:text-gray-400"},"Traditional Chinese",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[15]||(e[15]=s=>l(i).address_line_2["zh-TW"]=s),id:"address_line_2_zh_TW",class:"mt-1 block w-full input-sm"},null,512),[[_,l(i).address_line_2["zh-TW"]]])]),t("div",null,[e[44]||(e[44]=t("label",{for:"address_line_2_zh_CN",class:"block text-xs font-medium text-gray-700 dark:text-gray-400"},"Simplified Chinese",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[16]||(e[16]=s=>l(i).address_line_2["zh-CN"]=s),id:"address_line_2_zh_CN",class:"mt-1 block w-full input-sm"},null,512),[[_,l(i).address_line_2["zh-CN"]]])])]),l(i).errors.address_line_2?(o(),d("div",me,u(l(i).errors.address_line_2),1)):m("",!0)]),t("div",_e,[t("fieldset",ge,[e[49]||(e[49]=t("legend",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 px-1"},"City",-1)),t("div",pe,[t("div",null,[e[46]||(e[46]=t("label",{for:"city_en",class:"block text-xs font-medium text-gray-700 dark:text-gray-400"},"English",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[17]||(e[17]=s=>l(i).city.en=s),id:"city_en",class:"mt-1 block w-full input-sm"},null,512),[[_,l(i).city.en]])]),t("div",null,[e[47]||(e[47]=t("label",{for:"city_zh_TW",class:"block text-xs font-medium text-gray-700 dark:text-gray-400"},"Traditional Chinese",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[18]||(e[18]=s=>l(i).city["zh-TW"]=s),id:"city_zh_TW",class:"mt-1 block w-full input-sm"},null,512),[[_,l(i).city["zh-TW"]]])]),t("div",null,[e[48]||(e[48]=t("label",{for:"city_zh_CN",class:"block text-xs font-medium text-gray-700 dark:text-gray-400"},"Simplified Chinese",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[19]||(e[19]=s=>l(i).city["zh-CN"]=s),id:"city_zh_CN",class:"mt-1 block w-full input-sm"},null,512),[[_,l(i).city["zh-CN"]]])])]),l(i).errors.city?(o(),d("div",ye,u(l(i).errors.city),1)):m("",!0)]),t("div",null,[e[50]||(e[50]=t("label",{for:"postal_code",class:"label"},"Postal Code",-1)),a(t("input",{type:"text","onUpdate:modelValue":e[20]||(e[20]=s=>l(i).postal_code=s),id:"postal_code",class:"mt-1 block w-full input"},null,512),[[_,l(i).postal_code]]),l(i).errors.postal_code?(o(),d("div",ce,u(l(i).errors.postal_code),1)):m("",!0)]),t("div",null,[e[51]||(e[51]=t("label",{for:"seating_capacity",class:"label"},"Seating Capacity",-1)),a(t("input",{type:"number","onUpdate:modelValue":e[21]||(e[21]=s=>l(i).seating_capacity=s),id:"seating_capacity",class:"mt-1 block w-full input"},null,512),[[_,l(i).seating_capacity,void 0,{number:!0}]]),l(i).errors.seating_capacity?(o(),d("div",xe,u(l(i).errors.seating_capacity),1)):m("",!0)])]),t("div",fe,[t("div",null,[e[52]||(e[52]=t("label",{for:"latitude",class:"label"},"Latitude",-1)),a(t("input",{type:"number",step:"any","onUpdate:modelValue":e[22]||(e[22]=s=>l(i).latitude=s),id:"latitude",class:"mt-1 block w-full input"},null,512),[[_,l(i).latitude,void 0,{number:!0}]]),l(i).errors.latitude?(o(),d("div",ve,u(l(i).errors.latitude),1)):m("",!0)]),t("div",null,[e[53]||(e[53]=t("label",{for:"longitude",class:"label"},"Longitude",-1)),a(t("input",{type:"number",step:"any","onUpdate:modelValue":e[23]||(e[23]=s=>l(i).longitude=s),id:"longitude",class:"mt-1 block w-full input"},null,512),[[_,l(i).longitude,void 0,{number:!0}]]),l(i).errors.longitude?(o(),d("div",be,u(l(i).errors.longitude),1)):m("",!0)])]),t("div",ke,[a(t("input",{type:"checkbox","onUpdate:modelValue":e[24]||(e[24]=s=>l(i).is_active=s),id:"is_active",class:"h-4 w-4 text-indigo-600 border-gray-300 dark:border-gray-700 dark:bg-gray-900 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded"},null,512),[[E,l(i).is_active]]),e[54]||(e[54]=t("label",{for:"is_active",class:"ml-2 block text-sm text-gray-900 dark:text-gray-100"},"Active",-1))]),l(i).errors.is_active?(o(),d("div",ze,u(l(i).errors.is_active),1)):m("",!0)]),t("div",Ce,[g(l(M),{href:r.route("admin.venues.index"),class:"btn btn-secondary"},{default:v(()=>e[55]||(e[55]=[A("Cancel")])),_:1},8,["href"]),t("button",{type:"submit",disabled:l(i).processing,class:O(["btn btn-primary",{"opacity-25":l(i).processing}])}," Update Venue ",10,Ve)])],32)])])])])]),_:1})],64))}});export{Je as default};
