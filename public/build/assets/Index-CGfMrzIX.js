import{d as J,n as K,c as Q,C as R,s as V,a as f,o as d,b as s,e as r,m as X,w as a,f as l,P as c,g as n,h as A,i as k,F as w,r as M,t as i,j as h,k as v,v as Y,l as C,W as Z}from"./app-BlriFIqe.js";import{_ as ee}from"./AppLayout.vue_vue_type_script_setup_true_lang-BPRGBHPc.js";import{_ as te,a as re,b as ae,c as se,d as oe}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DgI8mb4r.js";import{_ as E}from"./index-n8QSRl2p.js";import{g as F}from"./i18n-DEP6uGVt.js";import{l as le}from"./lodash-DW8FVhZD.js";import{_ as ne}from"./PageHeader.vue_vue_type_script_setup_true_lang-c-H7jIUV.js";import{_ as ie,a as de}from"./AdminDataTable.vue_vue_type_script_setup_true_lang-Do2xfTCC.js";import{_ as B,a as u,b as m}from"./TableHeader.vue_vue_type_script_setup_true_lang-CB7gcjE5.js";import{_ as ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-Bhpe8JcZ.js";import"./useForwardPropsEmits-BFEAxE1x.js";import"./useForwardExpose-CTSY01TP.js";import"./useFocusGuards-DE3wpZyr.js";import"./Teleport-XyWxSjNg.js";import"./VisuallyHidden-c1buR7Qf.js";import"./UserMenuContent.vue_vue_type_script_setup_true_lang-BKdqBXVk.js";import"./RovingFocusGroup-C8rdEAgk.js";import"./createLucideIcon-C1ebVwtv.js";import"./x-DhC37dsd.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BGa5dCta.js";import"./useToast-D6MTp1Xk.js";const ge={class:"py-12"},fe={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},me={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg"},pe={class:"p-6 lg:p-8 bg-white dark:bg-gray-800 dark:bg-gradient-to-bl dark:from-gray-700/50 dark:via-transparent border-b border-gray-200 dark:border-gray-700"},xe=["value"],ye={key:0},be={key:0,class:"text-gray-600 dark:text-gray-400"},ke={key:1,class:"text-gray-600 dark:text-gray-400"},ve={key:1,class:"text-gray-500"},_e={class:"text-sm"},ce={class:"text-gray-900 dark:text-white"},we={key:0,class:"text-gray-500"},Ce=["onClick"],De={class:"py-4 text-sm text-gray-600 dark:text-gray-400"},$e=J({__name:"Index",props:{coupons:{},organizers:{},filters:{}},setup(I){var U,z,N,T;const L=K(),_=Q(()=>L.props.locale),x=I,g=R({search:((U=x.filters)==null?void 0:U.search)||"",organizer_id:((z=x.filters)==null?void 0:z.organizer_id)||"",type:((N=x.filters)==null?void 0:N.type)||"",status:((T=x.filters)==null?void 0:T.status)||"",per_page:x.coupons.per_page||15}),b=V(!1),y=V(null),p=le.throttle(()=>{g.get(route("admin.coupons.index"),{preserveState:!0,replace:!0})},300),O=(o,e)=>{y.value={id:o,name:e},b.value=!0},D=()=>{b.value=!1,y.value=null},P=()=>{y.value&&Z.delete(route("admin.coupons.destroy",y.value.id),{onSuccess:()=>D(),preserveState:!1})},$=o=>{if(!o)return"N/A";const e={year:"numeric",month:"short",day:"numeric"};return new Date(o).toLocaleDateString(_.value,e)},W=o=>o==="single_use"?"Single Use":"Multi Use",j=(o,e)=>e==="percentage"?`${o}%`:`$${(o/100).toFixed(2)}`,q=o=>{var e;return((e=o.user_coupons_count)==null?void 0:e.toString())||"0"},S=o=>{const e=new Date;return o.valid_from&&new Date(o.valid_from)>e?"Upcoming":o.expires_at&&new Date(o.expires_at)<e?"Expired":"Active"},G=o=>{switch(o){case"single_use":return"bg-blue-100 text-blue-800 dark:bg-blue-700 dark:text-blue-200";case"multi_use":return"bg-green-100 text-green-800 dark:bg-green-700 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-200"}},H=o=>{switch(o.toLowerCase()){case"active":return"bg-green-100 text-green-800 dark:bg-green-700 dark:text-green-200";case"expired":return"bg-red-100 text-red-800 dark:bg-red-600 dark:text-red-100";case"upcoming":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-600 dark:text-yellow-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-500 dark:text-gray-100"}};return(o,e)=>(d(),f(w,null,[s(r(X),{title:"Coupons"}),s(ee,null,{default:a(()=>[l("div",ge,[l("div",fe,[l("div",me,[l("div",pe,[s(ne,{title:"Coupon Management",subtitle:"Manage coupon templates and campaigns"},{actions:a(()=>[s(r(c),{href:o.route("admin.coupons.create"),class:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-500 active:bg-indigo-700 focus:outline-none focus:border-indigo-700 focus:ring focus:ring-indigo-200 disabled:opacity-25 transition"},{default:a(()=>e[9]||(e[9]=[n(" Create New Coupon ")])),_:1},8,["href"])]),_:1}),s(ie,null,{filters:a(()=>[l("div",null,[e[10]||(e[10]=l("label",{for:"search_name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Search by Name or Code",-1)),v(l("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>r(g).search=t),onInput:e[1]||(e[1]=(...t)=>r(p)&&r(p)(...t)),id:"search_name",placeholder:"Search coupons...",class:"mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},null,544),[[Y,r(g).search]])]),l("div",null,[e[12]||(e[12]=l("label",{for:"organizer_filter",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Organizer",-1)),v(l("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>r(g).organizer_id=t),onChange:e[3]||(e[3]=(...t)=>r(p)&&r(p)(...t)),id:"organizer_filter",class:"mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},[e[11]||(e[11]=l("option",{value:""},"All Organizers",-1)),(d(!0),f(w,null,M(o.organizers,t=>(d(),f("option",{key:t.id,value:t.id},i(r(F)(t.name,_.value)),9,xe))),128))],544),[[C,r(g).organizer_id]])]),l("div",null,[e[14]||(e[14]=l("label",{for:"type_filter",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Type",-1)),v(l("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>r(g).type=t),onChange:e[5]||(e[5]=(...t)=>r(p)&&r(p)(...t)),id:"type_filter",class:"mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},e[13]||(e[13]=[l("option",{value:""},"All Types",-1),l("option",{value:"single_use"},"Single Use",-1),l("option",{value:"multi_use"},"Multi Use",-1)]),544),[[C,r(g).type]])]),l("div",null,[e[16]||(e[16]=l("label",{for:"status_filter",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Status",-1)),v(l("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>r(g).status=t),onChange:e[7]||(e[7]=(...t)=>r(p)&&r(p)(...t)),id:"status_filter",class:"mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},e[15]||(e[15]=[l("option",{value:""},"All Status",-1),l("option",{value:"active"},"Active",-1),l("option",{value:"expired"},"Expired",-1),l("option",{value:"upcoming"},"Upcoming",-1)]),544),[[C,r(g).status]])])]),header:a(()=>[s(r(m),null,{default:a(()=>e[17]||(e[17]=[n("Code")])),_:1}),s(r(m),null,{default:a(()=>e[18]||(e[18]=[n("Name")])),_:1}),s(r(m),null,{default:a(()=>e[19]||(e[19]=[n("Organizer")])),_:1}),s(r(m),null,{default:a(()=>e[20]||(e[20]=[n("Type")])),_:1}),s(r(m),null,{default:a(()=>e[21]||(e[21]=[n("Discount")])),_:1}),s(r(m),null,{default:a(()=>e[22]||(e[22]=[n("Valid Period")])),_:1}),s(r(m),null,{default:a(()=>e[23]||(e[23]=[n("Usage")])),_:1}),s(r(m),null,{default:a(()=>e[24]||(e[24]=[n("Status")])),_:1}),s(r(m),{class:"text-right"},{default:a(()=>e[25]||(e[25]=[n("Actions")])),_:1})]),body:a(()=>[o.coupons.data&&o.coupons.data.length===0?(d(),A(r(B),{key:0},{default:a(()=>[s(r(u),{colspan:"9",class:"text-center"},{default:a(()=>e[26]||(e[26]=[n("No coupons found")])),_:1})]),_:1})):k("",!0),(d(!0),f(w,null,M(o.coupons.data,t=>(d(),A(r(B),{key:t.id},{default:a(()=>[s(r(u),{class:"font-mono text-sm font-semibold text-indigo-600 dark:text-indigo-400"},{default:a(()=>[n(i(t.code),1)]),_:2},1024),s(r(u),{class:"font-medium text-gray-900 dark:text-white"},{default:a(()=>[n(i(t.name),1)]),_:2},1024),s(r(u),null,{default:a(()=>[n(i(t.organizer?r(F)(t.organizer.name,_.value):"N/A"),1)]),_:2},1024),s(r(u),null,{default:a(()=>[l("span",{class:h([G(t.type),"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},i(W(t.type)),3)]),_:2},1024),s(r(u),null,{default:a(()=>[n(i(j(t.discount_value,t.discount_type)),1)]),_:2},1024),s(r(u),{class:"text-sm"},{default:a(()=>[t.valid_from||t.expires_at?(d(),f("div",ye,[t.valid_from?(d(),f("div",be,"From: "+i($(t.valid_from)),1)):k("",!0),t.expires_at?(d(),f("div",ke,"Until: "+i($(t.expires_at)),1)):k("",!0)])):(d(),f("div",ve,"No restrictions"))]),_:2},1024),s(r(u),null,{default:a(()=>[l("div",_e,[l("div",ce,i(q(t)),1),t.max_issuance?(d(),f("div",we,"of "+i(t.max_issuance)+" max",1)):k("",!0)])]),_:2},1024),s(r(u),null,{default:a(()=>[l("span",{class:h([H(S(t)),"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},i(S(t)),3)]),_:2},1024),s(r(u),{class:"text-right"},{default:a(()=>[s(r(c),{href:o.route("admin.coupons.show",t.id),class:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-600 mr-3"},{default:a(()=>e[27]||(e[27]=[n("View")])),_:2},1032,["href"]),s(r(c),{href:o.route("admin.coupons.edit",t.id),class:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-600 mr-3"},{default:a(()=>e[28]||(e[28]=[n("Edit")])),_:2},1032,["href"]),l("button",{onClick:Se=>O(t.id,t.name),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-600"},"Delete",8,Ce)]),_:2},1024)]),_:2},1024))),128))]),_:1}),s(de,{links:o.coupons.links,from:o.coupons.from,to:o.coupons.to,total:o.coupons.total},null,8,["links","from","to","total"])])])])]),s(r(te),{open:b.value,"onUpdate:open":e[8]||(e[8]=t=>b.value=t)},{default:a(()=>[s(r(re),{class:"sm:max-w-[425px]"},{default:a(()=>{var t;return[s(r(ae),null,{default:a(()=>[s(r(se),null,{default:a(()=>e[29]||(e[29]=[n("Delete Coupon")])),_:1})]),_:1}),l("p",De,' Are you sure you want to delete the coupon "'+i((t=y.value)==null?void 0:t.name)+'"? This action cannot be undone. ',1),s(r(oe),null,{default:a(()=>[s(E,{variant:"outline",onClick:D},{default:a(()=>e[30]||(e[30]=[n("Cancel")])),_:1}),s(E,{variant:"destructive",onClick:P,class:"ml-3"},{default:a(()=>e[31]||(e[31]=[n("Delete Coupon")])),_:1})]),_:1})]}),_:1})]),_:1},8,["open"])]),_:1})],64))}}),Qe=ue($e,[["__scopeId","data-v-2e52c92a"]]);export{Qe as default};
