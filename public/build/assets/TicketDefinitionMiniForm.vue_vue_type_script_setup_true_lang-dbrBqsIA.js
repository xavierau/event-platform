import{d as L,c as C,s as T,C as q,D as B,h as N,o as p,w as r,b as s,e,f as i,g as d,p as D,a as y,F as k,r as w,j as P,t as v,k as x,v as F,E as A,l as Q}from"./app-BlriFIqe.js";import{_ as u}from"./InputError.vue_vue_type_script_setup_true_lang-Cyvqxqv2.js";import{_ as M}from"./index-n8QSRl2p.js";import{a as z,b as K,c as G,d as H,_ as J}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DgI8mb4r.js";import{_ as R}from"./DialogClose.vue_vue_type_script_setup_true_lang-3RA3vyFJ.js";import{_ as W}from"./DialogDescription.vue_vue_type_script_setup_true_lang-DjOzeiDs.js";import{_ as f}from"./Input.vue_vue_type_script_setup_true_lang-Ds4BPUgy.js";import{_ as m}from"./Label.vue_vue_type_script_setup_true_lang-XssgAD5J.js";import{c as O}from"./i18n-DEP6uGVt.js";const X={class:"border-b border-gray-200 dark:border-gray-700"},Y={class:"-mb-px flex space-x-4","aria-label":"Tabs"},Z=["onClick"],I=["id","onUpdate:modelValue"],h={class:"grid grid-cols-1 gap-x-6 gap-y-4 md:grid-cols-2"},ee=["value"],ue=L({__name:"TicketDefinitionMiniForm",props:{show:{type:Boolean},statuses:{},availableLocales:{}},emits:["close","ticketDefinitionCreated"],setup(U,{emit:j}){var $;const n=U,V=j,c=C(()=>Object.entries(n.availableLocales).map(([o,a])=>({key:o,label:a}))),b=T(O.value||(c.value.length>0?c.value[0].key:"en")),t=q({name:Object.fromEntries(Object.keys(n.availableLocales).map(o=>[o,""])),description:Object.fromEntries(Object.keys(n.availableLocales).map(o=>[o,""])),price:void 0,total_quantity:void 0,status:n.statuses&&n.statuses.length>0?(($=n.statuses.find(o=>o.value==="active"))==null?void 0:$.value)||n.statuses[0].value:"draft",availability_window_start:"",availability_window_end:"",min_per_order:1,max_per_order:void 0});B(()=>n.show,o=>{var a;o&&(t.reset(),t.clearErrors(),t.status=n.statuses&&n.statuses.length>0?((a=n.statuses.find(l=>l.value==="active"))==null?void 0:a.value)||n.statuses[0].value:"draft",t.name=Object.fromEntries(Object.keys(n.availableLocales).map(l=>[l,""])),t.description=Object.fromEntries(Object.keys(n.availableLocales).map(l=>[l,""])),b.value=O.value||(c.value.length>0?c.value[0].key:"en"))});const S=C(()=>n.statuses.map(o=>({value:o.value,label:o.label}))),E=()=>{t.transform(o=>({...o,price:typeof o.price=="number"&&o.price!==null?Math.round(o.price*100):o.price})).post(route("admin.ticket-definitions.store"),{preserveScroll:!0,onSuccess:o=>{var a,l;V("ticketDefinitionCreated",((l=(a=o.props.jetstream)==null?void 0:a.flash)==null?void 0:l.ticketDefinition)||t.data()),_()},onError:o=>{console.error("Mini form creation error:",o),o.price&&t.price}})},_=()=>{V("close")};return(o,a)=>(p(),N(e(J),{open:o.show,"onUpdate:open":a[7]||(a[7]=l=>o.show?_():null)},{default:r(()=>[s(e(z),{class:"sm:max-w-[700px]",onEscapeKeyDown:_,onPointerDownOutside:_},{default:r(()=>[s(e(K),null,{default:r(()=>[s(e(G),null,{default:r(()=>a[8]||(a[8]=[d("Create New Ticket Definition")])),_:1}),s(e(W),null,{default:r(()=>a[9]||(a[9]=[d(" Quickly define a new type of ticket. It can be associated with specific event occurrences later. ")])),_:1})]),_:1}),i("form",{onSubmit:D(E,["prevent"]),class:"space-y-6"},[i("div",X,[i("nav",Y,[(p(!0),y(k,null,w(c.value,l=>(p(),y("button",{key:l.key,onClick:D(g=>b.value=l.key,["prevent"]),class:P([b.value===l.key?"border-indigo-500 text-indigo-600 dark:border-indigo-400 dark:text-indigo-300":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:border-gray-600 dark:hover:text-gray-200","border-b-2 px-1 py-3 text-sm font-medium whitespace-nowrap focus:outline-none"]),type:"button"},v(l.label),11,Z))),128))])]),(p(!0),y(k,null,w(c.value,l=>x((p(),y("div",{key:l.key,class:"space-y-4"},[i("div",null,[s(e(m),{for:`name_${l.key}`},{default:r(()=>[d("Name ("+v(l.label)+")",1)]),_:2},1032,["for"]),s(e(f),{id:`name_${l.key}`,type:"text",modelValue:e(t).name[l.key],"onUpdate:modelValue":g=>e(t).name[l.key]=g,class:"mt-1 block w-full"},null,8,["id","modelValue","onUpdate:modelValue"]),s(u,{message:e(t).errors[`name.${l.key}`],class:"mt-1"},null,8,["message"])]),i("div",null,[s(e(m),{for:`description_${l.key}`},{default:r(()=>[d("Description ("+v(l.label)+")",1)]),_:2},1032,["for"]),x(i("textarea",{id:`description_${l.key}`,"onUpdate:modelValue":g=>e(t).description[l.key]=g,rows:"3",class:"focus:ring-opacity-50 mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200"},null,8,I),[[F,e(t).description[l.key]]]),s(u,{message:e(t).errors[`description.${l.key}`],class:"mt-1"},null,8,["message"])])])),[[A,b.value===l.key]])),128)),i("div",h,[i("div",null,[s(e(m),{for:"price"},{default:r(()=>a[10]||(a[10]=[d("Price")])),_:1}),s(e(f),{id:"price",type:"number",step:"0.01",modelValue:e(t).price,"onUpdate:modelValue":a[0]||(a[0]=l=>e(t).price=l),modelModifiers:{number:!0},placeholder:"e.g., 10.00",class:"mt-1 block w-full"},null,8,["modelValue"]),s(u,{message:e(t).errors.price,class:"mt-1"},null,8,["message"])]),i("div",null,[s(e(m),{for:"total_quantity"},{default:r(()=>a[11]||(a[11]=[d("Total Quantity (optional)")])),_:1}),s(e(f),{id:"total_quantity",type:"number",modelValue:e(t).total_quantity,"onUpdate:modelValue":a[1]||(a[1]=l=>e(t).total_quantity=l),modelModifiers:{number:!0},placeholder:"e.g., 100",class:"mt-1 block w-full"},null,8,["modelValue"]),s(u,{message:e(t).errors.total_quantity,class:"mt-1"},null,8,["message"])]),i("div",null,[s(e(m),{for:"status"},{default:r(()=>a[12]||(a[12]=[d("Status")])),_:1}),x(i("select",{id:"status","onUpdate:modelValue":a[2]||(a[2]=l=>e(t).status=l),class:"focus:ring-opacity-50 mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200"},[a[13]||(a[13]=i("option",{disabled:"",value:""},"Select status",-1)),(p(!0),y(k,null,w(S.value,l=>(p(),y("option",{key:l.value,value:l.value},v(l.label),9,ee))),128))],512),[[Q,e(t).status]]),s(u,{message:e(t).errors.status,class:"mt-1"},null,8,["message"])]),a[18]||(a[18]=i("div",null,null,-1)),i("div",null,[s(e(m),{for:"availability_window_start"},{default:r(()=>a[14]||(a[14]=[d("Sale Starts At (optional)")])),_:1}),s(e(f),{id:"availability_window_start",type:"datetime-local",modelValue:e(t).availability_window_start,"onUpdate:modelValue":a[3]||(a[3]=l=>e(t).availability_window_start=l),class:"mt-1 block w-full"},null,8,["modelValue"]),s(u,{message:e(t).errors.availability_window_start,class:"mt-1"},null,8,["message"])]),i("div",null,[s(e(m),{for:"availability_window_end"},{default:r(()=>a[15]||(a[15]=[d("Sale Ends At (optional)")])),_:1}),s(e(f),{id:"availability_window_end",type:"datetime-local",modelValue:e(t).availability_window_end,"onUpdate:modelValue":a[4]||(a[4]=l=>e(t).availability_window_end=l),class:"mt-1 block w-full"},null,8,["modelValue"]),s(u,{message:e(t).errors.availability_window_end,class:"mt-1"},null,8,["message"])]),i("div",null,[s(e(m),{for:"min_per_order"},{default:r(()=>a[16]||(a[16]=[d("Min. Per Order")])),_:1}),s(e(f),{id:"min_per_order",type:"number",modelValue:e(t).min_per_order,"onUpdate:modelValue":a[5]||(a[5]=l=>e(t).min_per_order=l),modelModifiers:{number:!0},placeholder:"Default: 1",min:"1",class:"mt-1 block w-full"},null,8,["modelValue"]),s(u,{message:e(t).errors.min_per_order,class:"mt-1"},null,8,["message"])]),i("div",null,[s(e(m),{for:"max_per_order"},{default:r(()=>a[17]||(a[17]=[d("Max. Per Order (optional)")])),_:1}),s(e(f),{id:"max_per_order",type:"number",modelValue:e(t).max_per_order,"onUpdate:modelValue":a[6]||(a[6]=l=>e(t).max_per_order=l),modelModifiers:{number:!0},placeholder:"e.g., 10",min:"1",class:"mt-1 block w-full"},null,8,["modelValue"]),s(u,{message:e(t).errors.max_per_order,class:"mt-1"},null,8,["message"])])]),s(e(H),{class:"pt-6"},{default:r(()=>[s(e(R),{"as-child":""},{default:r(()=>[s(e(M),{type:"button",variant:"outline",onClick:_},{default:r(()=>a[19]||(a[19]=[d("Cancel")])),_:1})]),_:1}),s(e(M),{type:"submit",disabled:e(t).processing},{default:r(()=>[d(v(e(t).processing?"Creating...":"Create Ticket Definition"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]))}});export{ue as _};
